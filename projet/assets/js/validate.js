function handleSubmit(){var e=$("#area").val(),t=$("#purchase_date").val(),r=$("#dechifrage_date").val(),n=$("#culture_type").val(),i=$("#lastname").val(),l=$("#firstname").val(),a=$("#telephone").val(),o=$("#email").val(),d=$("#address").val(),m=$("#type").val(),c=document.getElementById("picture").files[0],u=document.getElementById("area_picture").files[0],s=$("#locality").val(),g=$("#limit").val(),_=$("#longitude_b1").val(),p=$("#latitude_b1").val(),y=$("#longitude_b2").val(),b=$("#latitude_b2").val(),h=$("#longitude_b3").val(),T=$("#latitude_b3").val(),v=$("#longitude_b4").val(),E=$("#latitude_b4").val();const M=/(^\(?\+?([0-9]{3})\)?[-. ]?)?([0-9]{2})[-. ]?([0-9]{2})[-. ]?([0-9]{2})[-. ]?([0-9]{2})$/,B=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;if(document.getElementById("area_error").innerHTML=""==e?"Ce champ est obligatoire":"",document.getElementById("purchase_date_error").innerHTML=""==t?"Ce champ est obligatoire":"",document.getElementById("dechifrage_date_error").innerHTML=""==r?"Ce champ est obligatoire":"",document.getElementById("longitude_b1_error").innerHTML=""==_?"Ce champ est obligatoire":"",document.getElementById("latitude_b1_error").innerHTML=""==p?"Ce champ est obligatoire":"",document.getElementById("longitude_b2_error").innerHTML=""==y?"Ce champ est obligatoire":"",document.getElementById("latitude_b2_error").innerHTML=""==b?"Ce champ est obligatoire":"",document.getElementById("longitude_b3_error").innerHTML=""==h?"Ce champ est obligatoire":"",document.getElementById("latitude_b3_error").innerHTML=""==T?"Ce champ est obligatoire":"",document.getElementById("longitude_b4_error").innerHTML=""==v?"Ce champ est obligatoire":"",document.getElementById("latitude_b4_error").innerHTML=""==E?"Ce champ est obligatoire":"",document.getElementById("culture_type_error").innerHTML=""==n?"Ce champ est obligatoire":"",document.getElementById("lastname_error").innerHTML=""==i?"Ce champ est obligatoire":"",document.getElementById("firstname_error").innerHTML=""==l?"Ce champ est obligatoire":"",document.getElementById("telephone_error").innerHTML=""==a?"Ce champ est obligatoire":"",document.getElementById("email_error").innerHTML=""==o?"Ce champ est obligatoire":"",document.getElementById("address_error").innerHTML=""==d?"Ce champ est obligatoire":"",document.getElementById("type_error").innerHTML=""==m?"Ce champ est obligatoire":"",document.getElementById("picture_error").innerHTML=""==c?"Ce champ est obligatoire":"",document.getElementById("area_picture_error").innerHTML=""==u?"Ce champ est obligatoire":"",document.getElementById("locality_error").innerHTML=""==s?"Ce champ est obligatoire":"",document.getElementById("limit_error").innerHTML=""==g?"Ce champ est obligatoire":"",""!=e&&""!=t&&""!=r&&""!=n&&""!=i&&""!=l&&""!=a&&""!=o&&""!=d&&""!=m&&""!=c&&""!=u&&""!=s&&""!=g&&""!=_&&""!=y&&""!=h&&""!=v&&""!=p&&""!=b&&""!=T&&""!=E)if(B.test(o))if(document.getElementById("email_error").innerHTML="",M.test(a)){document.getElementById("telephone_error").innerHTML="";var I=c.type.split("/")[0],L=u.type.split("/")[0];"image"==I?(document.getElementById("picture_error").innerHTML="",bytesToMb(c.size)<=2?"image"==L?(document.getElementById("area_picture_error").innerHTML="",bytesToMb(u.size)?(document.getElementById("area_picture_error").innerHTML="",$.ajax({url:"controllers/save.php",type:"POST",data:{area:e,purchase_date:t,dechifrage_date:r,culture_type:n,lastname:i,firstname:l,telephone:a,email:o,address:d,type:m,longitude_b1:_,latitude_b1:p,longitude_b2:y,latitude_b2:b,longitude_b3:h,latitude_b3:T,longitude_b4:v,latitude_b4:E,picture:c.name,area_picture:u.name,limit:g,locality:s},success:function(e){"New record created successfully"==e?window.location.replace("./views/carte.html"):alert("Erreur lors de l'enregistrement")},error:function(e){console.log(e)}})):document.getElementById("area_picture_error").innerHTML="La taille du fichier ne doit pas dépasser 2MB"):document.getElementById("area_picture_error").innerHTML="Vous devez choisir une image":document.getElementById("area_picture_error").innerHTML="La taille du fichier ne doit pas dépasser 2MB"):document.getElementById("picture_error").innerHTML="Vous devez choisir une image"}else document.getElementById("telephone_error").innerHTML="Numéro de téléphone invalide";else document.getElementById("email_error").innerHTML="Email invalide"}function verifEmail(){var e=$("#email").val();/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)?($("#email").removeClass("is-invalid"),document.getElementById("email_error").innerHTML=""):($("#email").addClass("is-invalid"),document.getElementById("email_error").innerHTML="Adresse email invalid")}function verifTelephone(){var e=$("#telephone").val();/(^\(?\+?([0-9]{3})\)?[-. ]?)?([0-9]{2})[-. ]?([0-9]{2})[-. ]?([0-9]{2})[-. ]?([0-9]{2})$/.test(e)?($("#telephone").removeClass("is-invalid"),document.getElementById("telephone_error").innerHTML=""):($("#telephone").addClass("is-invalid"),document.getElementById("telephone_error").innerHTML="Téléphone invalid")}function bytesToMb(e){return e/1e6}
